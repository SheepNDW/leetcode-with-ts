## 42. Trapping Rain Water

* 解法 1：考慮每個位置的上方可以存多少水

找出左側最高和右側最高，兩者取小的最後再減去自身所在高度就是目前這個 `height[i]` 可以存的水量：

```ts
area[i] = Math.min(leftHighest[i], rightHighest[i]) - height[i];
area[i] = area[i] < 0 ? 0 : area[i];
```

如果每次遍歷時都向左向右尋找最高的話，時間複雜度會來到 $O(n^2)$，我們可以預先計算好，例如：

`leftHighest[i]` 代表 `i` 左側的最大高度，計算方式就會是

```ts
leftHighest[i] = Math.max(leftHighest[i-1], height[i-1]);
```

透過兩次 pass 就可以建立出每個位置的左側和右側最高，最後再掃一次就可以計算出總共可以存多少水了。

* 解法 2：考慮每個位置的上方構成的最大矩形

解法和 84. Largest-Rectangle-in-Histogram 剛好相反。這題我們需要維護一個遞減 stack，如果遇到一個比較高的 bar，那就以 stack 頂部元素為窪地可以分割出一塊蓄水矩形，其高度取決於左右兩側高度的較矮值，寬度取決於其元素之前之後的位置。

例如：`[7, 4, 3, 2, 1, 6]`

當考察 6 時，考慮到 1 這個窪地，蓄水面積就是 `高 = min(2,6)-1, 寬 = 5 - 3 - 1`，然後彈出 1，接著考察 2 這個窪地，蓄水面積是 `高 = min(3,6)-1, 寬 = 5 - 2 - 1`。窪地 2 對應的蓄水矩形在橫向上是覆蓋了窪地 1 的，但是面積不包含之前計算過的窪地 1 的矩形。

依此類推繼續將 4、3 給彈出，然後 6 就可以加入 stack，此時 stack 仍然維持單調遞減。最後答案為所有窪地蓄水矩形的總和。
